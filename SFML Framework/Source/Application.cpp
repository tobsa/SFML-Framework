////////////////////////////////////////////////////////////////////////////////
// Filename: Application.cpp
// Author:   Tobias Savinainen
// Year:     2013
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Header files
////////////////////////////////////////////////////////////////////////////////
#include "Application.hpp"
#include <SFML/Graphics/RenderWindow.hpp>
#include <SFML/Graphics/Sprite.hpp>
#include <SFML/Window/Mouse.hpp>

namespace sfx
{

////////////////////////////////////////////////////////////////////////////////
Application::Application(sf::VideoMode videoMode, const std::string& name, sf::Uint32 style) :
    m_renderWindow (videoMode, name, style)
{
}

////////////////////////////////////////////////////////////////////////////////
Application::Application(unsigned int width, unsigned int height, const std::string& name, sf::Uint32 style) :
    m_renderWindow (sf::VideoMode(width, height), name, style)
{
}

////////////////////////////////////////////////////////////////////////////////
sf::Image Application::capture() const
{
    return m_renderWindow.capture();
}

////////////////////////////////////////////////////////////////////////////////
sf::Vector2f Application::getSize() const
{
    return static_cast<sf::Vector2f>(m_renderWindow.getSize());
}

////////////////////////////////////////////////////////////////////////////////
sf::Vector2f Application::getPosition() const
{
    return static_cast<sf::Vector2f>(m_renderWindow.getPosition());
}

////////////////////////////////////////////////////////////////////////////////
sf::Vector2f Application::getMousePosition() const
{
    return static_cast<sf::Vector2f>(sf::Mouse::getPosition(m_renderWindow));
}

////////////////////////////////////////////////////////////////////////////////
bool Application::isOpen() const
{
    return m_renderWindow.isOpen();
}

////////////////////////////////////////////////////////////////////////////////
bool Application::pollEvent(sf::Event& event)
{
    return m_renderWindow.pollEvent(event);
}

////////////////////////////////////////////////////////////////////////////////
void Application::create(sf::VideoMode videoMode, const std::string& name, sf::Uint32 style)
{
    m_renderWindow.create(videoMode, name, style);
}

////////////////////////////////////////////////////////////////////////////////
void Application::create(unsigned int width, unsigned int height, const std::string& name, sf::Uint32 style)
{
    m_renderWindow.create(sf::VideoMode(width, height), name, style);
}

////////////////////////////////////////////////////////////////////////////////
void Application::close()
{
    m_renderWindow.close();
}

////////////////////////////////////////////////////////////////////////////////
void Application::setPosition(const sf::Vector2f& position)
{
    m_renderWindow.setPosition(static_cast<sf::Vector2i>(position));
}

////////////////////////////////////////////////////////////////////////////////
void Application::setPosition(float x, float y)
{
    setPosition(sf::Vector2f(x, y));
}

////////////////////////////////////////////////////////////////////////////////
void Application::setTitle(const std::string& title)
{
    m_renderWindow.setTitle(title);
}

////////////////////////////////////////////////////////////////////////////////
void Application::setVisible(bool visible)
{
    m_renderWindow.setVisible(visible);
}

////////////////////////////////////////////////////////////////////////////////
void Application::setVerticalSyncEnabled(bool enabled)
{
    m_renderWindow.setVerticalSyncEnabled(enabled);
}

////////////////////////////////////////////////////////////////////////////////
void Application::setMouseCursorVisible(bool visible)
{
    m_renderWindow.setMouseCursorVisible(visible);
}

////////////////////////////////////////////////////////////////////////////////
void Application::setKeyRepeatEnabled(bool enabled)
{
    m_renderWindow.setKeyRepeatEnabled(enabled);
}

////////////////////////////////////////////////////////////////////////////////
void Application::setFramerateLimit(unsigned int limit)
{
    m_renderWindow.setFramerateLimit(limit);
}

////////////////////////////////////////////////////////////////////////////////
void Application::setActive(bool active)
{
    m_renderWindow.setActive(active);
}


////////////////////////////////////////////////////////////////////////////////
void Application::display()
{
    m_renderWindow.display();
}

////////////////////////////////////////////////////////////////////////////////
void Application::clear(const sf::Color& color)
{
    m_renderWindow.clear();
}



////////////////////////////////////////////////////////////////////////////////
void Application::draw(const sf::Drawable& drawable, const sf::RenderStates& states)
{
    m_renderWindow.draw(drawable, states);
}

////////////////////////////////////////////////////////////////////////////////
void Application::draw(const sf::Vertex *vertices, unsigned int vertexCount, sf::PrimitiveType type, const sf::RenderStates& states)
{
    m_renderWindow.draw(vertices, vertexCount, type, states);
}

////////////////////////////////////////////////////////////////////////////////
void Application::setMousePosition(const sf::Vector2f& position)
{
    sf::Mouse::setPosition(static_cast<sf::Vector2i>(position), m_renderWindow);
}

////////////////////////////////////////////////////////////////////////////////
void Application::setMousePosition(float x, float y)
{
    setMousePosition(sf::Vector2f(x, y));
}

////////////////////////////////////////////////////////////////////////////////
sf::Texture& Application::getTexture(const std::string& filename)
{
    return m_resourceManager.getTexture(filename);
}

////////////////////////////////////////////////////////////////////////////////
sf::Font& Application::getFont(const std::string& filename)
{
    return m_resourceManager.getFont(filename);
}

////////////////////////////////////////////////////////////////////////////////
sf::SoundBuffer& Application::getSoundBuffer(const std::string& filename)
{
    return m_resourceManager.getSoundBuffer(filename);
}

////////////////////////////////////////////////////////////////////////////////
std::string Application::getValueType(const std::string& key)
{
    return m_gameSettings.getType(key);
}

////////////////////////////////////////////////////////////////////////////////
void Application::removeValue(const std::string& key)
{
    m_gameSettings.remove(key);
}

////////////////////////////////////////////////////////////////////////////////
void Application::addState(const std::string& key, StatePtr state)
{
    m_stateManager.add(key, state);
}

////////////////////////////////////////////////////////////////////////////////
Application::StatePtr Application::getState() const
{
    return m_stateManager.getState();
}

////////////////////////////////////////////////////////////////////////////////
Application::StatePtr Application::getState(const std::string& key)
{
    return m_stateManager.getState(key);
}

////////////////////////////////////////////////////////////////////////////////
void Application::setState(const std::string& key)
{
    return m_stateManager.setState(key);
}

} // namespace sfx