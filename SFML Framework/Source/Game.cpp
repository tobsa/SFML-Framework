////////////////////////////////////////////////////////////////////////////////
// Filename: Game.cpp
// Author:   Tobias Savinainen
// Year:     2013
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Header files
////////////////////////////////////////////////////////////////////////////////
#include "Game.hpp"
#include <SFML/Graphics/RenderWindow.hpp>
#include <SFML/Window/Event.hpp>

////////////////////////////////////////////////////////////////////////////////
Game::Game(sf::RenderWindow& renderWindow, sfx::ResourceManager& rm, sfx::GameSettings& gs, sfx::StateManager& sm) :
    State (renderWindow, rm, gs, sm, "Game")
{
}

////////////////////////////////////////////////////////////////////////////////
bool Game::onExecute()
{
    onEvent();
    onUpdate();
    onRender();

    return m_renderWindow.isOpen();
}

////////////////////////////////////////////////////////////////////////////////
void Game::onEvent()
{
    sf::Event event;
    while(m_renderWindow.pollEvent(event))
    {
        if(event.type == sf::Event::Closed)
            m_renderWindow.close();

        if(event.type == sf::Event::KeyPressed)
        {
            if(event.key.code == sf::Keyboard::Escape)
                m_renderWindow.close();
        }
    }
}

////////////////////////////////////////////////////////////////////////////////
void Game::onUpdate()
{
}

////////////////////////////////////////////////////////////////////////////////
void Game::onRender()
{
    m_renderWindow.clear();
    
    m_renderWindow.display();
}

////////////////////////////////////////////////////////////////////////////////
void Game::onPause()
{
}

////////////////////////////////////////////////////////////////////////////////
void Game::onResume()
{
}